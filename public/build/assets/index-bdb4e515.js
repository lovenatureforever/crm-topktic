import{a as g}from"./axios-ce57a9ce.js";import{a as w,b as U,d as T,V as k}from"./VCard-d56c746a.js";import{V as d}from"./VSelect-43cd4035.js";import{j as l,a2 as A,D as _,o as B,c as L,n as s,w as u,C,l as $,L as y}from"./main-e2e587ad.js";import"./VAvatar-59d5fe07.js";import"./VImg-8c8e46ee.js";import"./transition-bf1e6868.js";import"./VTextField-45812526.js";import"./forwardRefs-b6befefd.js";import"./VList-c2e41445.js";import"./VDivider-6a4cbbda.js";import"./VMenu-361b7835.js";import"./VCheckboxBtn-0d85a75b.js";const N={class:"mx-4"},O={__name:"index",setup(S){const c=l([]),V=l([]),m=l([]),v=l([]),f=l([]),p=l([]),o=l(""),n=l(""),r=l(""),i=l(""),b=()=>{window.open(`/api/export-csv?leader=${o.value}&agent=${n.value}&status=${r.value}&sub-status=${i.value}`,"_blank")},x=()=>{g.get("/users").then(t=>{const{users:e}=t.data;c.value=e.filter(a=>a.role=="Team Leader").map(a=>({value:a.id,title:a.username})),V.value=e.filter(a=>a.role=="Agent").map(a=>({leader:a.team_leader,value:a.id,title:a.username}))}),g.get("/admin/progress-categories").then(t=>{v.value=t.data.data.categories.map(e=>({id:e.id,value:e.name,title:e.name})),f.value=t.data.data.sub_categories.map(e=>({parent:e.parent_id,value:e.name,title:e.name}))})};return A(()=>{x()}),_(o,t=>{m.value=V.value.filter(e=>e.leader==t),m.value.unshift({value:"all",title:"All"}),n.value="all"}),_(r,t=>{const e=v.value.find(a=>a.value==t).id;p.value=f.value.filter(a=>a.parent==e),p.value.unshift({value:"all",title:"All"}),i.value="all"}),(t,e)=>(B(),L("div",null,[s(k,null,{default:u(()=>[s(w,null,{default:u(()=>[s(U,null,{default:u(()=>[C("Export CSV")]),_:1})]),_:1}),s(T,null,{default:u(()=>[$("div",N,[s(d,{class:"mt-4",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a),items:c.value,variant:"outlined",label:"Teamleader"},null,8,["modelValue","items"]),s(d,{class:"mt-4",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),items:m.value,variant:"outlined",label:"Agent"},null,8,["modelValue","items"]),s(d,{class:"mt-4",modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),items:v.value,variant:"outlined",label:"Category"},null,8,["modelValue","items"]),s(d,{class:"mt-4",modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),items:p.value,variant:"outlined",label:"Sub-category"},null,8,["modelValue","items"]),s(y,{class:"mt-4",onClick:b},{default:u(()=>[C(" Download ")]),_:1})])]),_:1})]),_:1})]))}};export{O as default};
